
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Design of a Rate Limiter · Grokking Modern System Design Interview</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="changhanxie">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-page-toc/page-toc.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="rate-limiter-algorithms.html" />
    
    
    <link rel="prev" href="requirements-of-a-rate-limiters-design.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://kuweiguge.github.io/Grokking-Modern-System-Design-Interview-Gitbook" target="_blank" class="custom-link">github</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    System Design Interviews
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../system-design-interviews/what-is-a-system-design-interview.html">
            
                <a href="../system-design-interviews/what-is-a-system-design-interview.html">
            
                    
                    What Is a System Design Interview?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="../system-design-interviews/how-to-prepare-for-success.html">
            
                <a href="../system-design-interviews/how-to-prepare-for-success.html">
            
                    
                    How to Prepare for Success
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="../system-design-interviews/how-to-perform-well.html">
            
                <a href="../system-design-interviews/how-to-perform-well.html">
            
                    
                    How to Perform Well
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../abstractions/">
            
                <a href="../abstractions/">
            
                    
                    Abstractions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../abstractions/why-are-abstractions-important.html">
            
                <a href="../abstractions/why-are-abstractions-important.html">
            
                    
                    Why Are Abstractions Important?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../abstractions/network-abstractions-remote-procedure-calls.html">
            
                <a href="../abstractions/network-abstractions-remote-procedure-calls.html">
            
                    
                    Network Abstractions: Remote Procedure Calls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../abstractions/spectrum-of-consistency-models.html">
            
                <a href="../abstractions/spectrum-of-consistency-models.html">
            
                    
                    Spectrum of Consistency Models
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../abstractions/the-spectrum-of-failure-models.html">
            
                <a href="../abstractions/the-spectrum-of-failure-models.html">
            
                    
                    The Spectrum of Failure Models
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../non-functional-system-characteristics/">
            
                <a href="../non-functional-system-characteristics/">
            
                    
                    Non-functional System Characteristics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../non-functional-system-characteristics/availability.html">
            
                <a href="../non-functional-system-characteristics/availability.html">
            
                    
                    Availability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../non-functional-system-characteristics/reliability.html">
            
                <a href="../non-functional-system-characteristics/reliability.html">
            
                    
                    Reliability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../non-functional-system-characteristics/scalability.html">
            
                <a href="../non-functional-system-characteristics/scalability.html">
            
                    
                    Scalability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../non-functional-system-characteristics/maintainability.html">
            
                <a href="../non-functional-system-characteristics/maintainability.html">
            
                    
                    Maintainability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../non-functional-system-characteristics/fault-tolerance.html">
            
                <a href="../non-functional-system-characteristics/fault-tolerance.html">
            
                    
                    Fault Tolerance
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../back-of-the-envelope-calculations/">
            
                <a href="../back-of-the-envelope-calculations/">
            
                    
                    Back-of-the-envelope Calculations
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../back-of-the-envelope-calculations/put-back-of-the-envelope-numbers-in-perspective.html">
            
                <a href="../back-of-the-envelope-calculations/put-back-of-the-envelope-numbers-in-perspective.html">
            
                    
                    Put Back-of-the-envelope Numbers in Perspective
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../back-of-the-envelope-calculations/page-2.html">
            
                <a href="../back-of-the-envelope-calculations/page-2.html">
            
                    
                    Examples of Resource Estimation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../building-blocks.html">
            
                <a href="../building-blocks.html">
            
                    
                    Building Blocks
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../building-blocks/introduction-to-building-blocks-for-modern-system-design.html">
            
                <a href="../building-blocks/introduction-to-building-blocks-for-modern-system-design.html">
            
                    
                    Introduction to Building Blocks for Modern System Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../domain-name-system.html">
            
                <a href="../domain-name-system.html">
            
                    
                    Domain Name System
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../domain-name-system/introduction-to-domain-name-system-dns.html">
            
                <a href="../domain-name-system/introduction-to-domain-name-system-dns.html">
            
                    
                    Introduction to Domain Name System (DNS)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../domain-name-system/how-the-domain-name-system-works.html">
            
                <a href="../domain-name-system/how-the-domain-name-system-works.html">
            
                    
                    How the Domain Name System Works
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../load-balancers.html">
            
                <a href="../load-balancers.html">
            
                    
                    Load Balancers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../load-balancers/introduction-to-load-balancers.html">
            
                <a href="../load-balancers/introduction-to-load-balancers.html">
            
                    
                    Introduction to Load Balancers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../load-balancers/global-and-local-load-balancing.html">
            
                <a href="../load-balancers/global-and-local-load-balancing.html">
            
                    
                    Global and Local Load Balancing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../load-balancers/advanced-details-of-load-balancers.html">
            
                <a href="../load-balancers/advanced-details-of-load-balancers.html">
            
                    
                    Advanced Details of Load Balancers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../databases.html">
            
                <a href="../databases.html">
            
                    
                    Databases
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../databases/introduction-to-databases.html">
            
                <a href="../databases/introduction-to-databases.html">
            
                    
                    Introduction to Databases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../databases/types-of-databases/">
            
                <a href="../databases/types-of-databases/">
            
                    
                    Types of Databases
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" data-path="../databases/types-of-databases/relational-database.html">
            
                <a href="../databases/types-of-databases/relational-database.html">
            
                    
                    Relational Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" data-path="../databases/types-of-databases/document-oriented-database.html">
            
                <a href="../databases/types-of-databases/document-oriented-database.html">
            
                    
                    Document-Oriented Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" data-path="../databases/types-of-databases/graph-database.html">
            
                <a href="../databases/types-of-databases/graph-database.html">
            
                    
                    Graph Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.4" data-path="../databases/types-of-databases/key-value-database.html">
            
                <a href="../databases/types-of-databases/key-value-database.html">
            
                    
                    Key-Value Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.5" data-path="../databases/types-of-databases/time-series-database.html">
            
                <a href="../databases/types-of-databases/time-series-database.html">
            
                    
                    Time Series Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.6" data-path="../databases/types-of-databases/wide-column-database.html">
            
                <a href="../databases/types-of-databases/wide-column-database.html">
            
                    
                    Wide-Column Database
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../databases/data-replication/">
            
                <a href="../databases/data-replication/">
            
                    
                    Data Replication
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.3.1" data-path="../databases/data-replication/what-is-a-quorum.html">
            
                <a href="../databases/data-replication/what-is-a-quorum.html">
            
                    
                    What is a quorum?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.2" data-path="../databases/data-replication/what-is-quorum-in-distributed-systems.html">
            
                <a href="../databases/data-replication/what-is-quorum-in-distributed-systems.html">
            
                    
                    What is quorum in distributed systems?
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../databases/data-partitioning.html">
            
                <a href="../databases/data-partitioning.html">
            
                    
                    Data Partitioning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../databases/trade-offs-in-databases.html">
            
                <a href="../databases/trade-offs-in-databases.html">
            
                    
                    Trade-offs in Databases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../databases/relational-databases.html">
            
                <a href="../databases/relational-databases.html">
            
                    
                    Relational Databases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="../databases/when-should-you-pick-a-relational-database.html">
            
                <a href="../databases/when-should-you-pick-a-relational-database.html">
            
                    
                    When should you pick a relational database?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="../databases/nosql-databases-introduction.html">
            
                <a href="../databases/nosql-databases-introduction.html">
            
                    
                    NoSQL Databases - Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="../databases/features-of-nosql-databases.html">
            
                <a href="../databases/features-of-nosql-databases.html">
            
                    
                    Features of NoSQL Databases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="../databases/when-to-pick-a-nosql-database.html">
            
                <a href="../databases/when-to-pick-a-nosql-database.html">
            
                    
                    When to pick a NoSQL Database?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.11" data-path="../databases/is-nosql-more-performant-than-sql.html">
            
                <a href="../databases/is-nosql-more-performant-than-sql.html">
            
                    
                    Is NoSQL More Performant Than SQL?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.12" data-path="../databases/polyglot-persistence.html">
            
                <a href="../databases/polyglot-persistence.html">
            
                    
                    Polyglot Persistence
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.13" data-path="../databases/multi-model-databases.html">
            
                <a href="../databases/multi-model-databases.html">
            
                    
                    Multi-Model Databases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.14" data-path="../databases/eventual-consistency.html">
            
                <a href="../databases/eventual-consistency.html">
            
                    
                    Eventual Consistency
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.15" data-path="../databases/strong-consistency.html">
            
                <a href="../databases/strong-consistency.html">
            
                    
                    Strong Consistency
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.16" data-path="../databases/cap-theorem.html">
            
                <a href="../databases/cap-theorem.html">
            
                    
                    CAP Theorem
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../key-value-store/">
            
                <a href="../key-value-store/">
            
                    
                    Key-value Store
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../key-value-store/design-of-a-key-value-store.html">
            
                <a href="../key-value-store/design-of-a-key-value-store.html">
            
                    
                    Design of a Key-value Store
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../key-value-store/versioning-data-and-achieving-configurability.html">
            
                <a href="../key-value-store/versioning-data-and-achieving-configurability.html">
            
                    
                    Versioning Data and Achieving Configurability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../key-value-store/ensure-scalability-and-replication.html">
            
                <a href="../key-value-store/ensure-scalability-and-replication.html">
            
                    
                    Ensure Scalability and Replication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../key-value-store/enable-fault-tolerance-and-failure-detection.html">
            
                <a href="../key-value-store/enable-fault-tolerance-and-failure-detection.html">
            
                    
                    Enable Fault Tolerance and Failure Detection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../key-value-store/system-design-the-key-value-store.html">
            
                <a href="../key-value-store/system-design-the-key-value-store.html">
            
                    
                    System Design: The Key-value Store
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../content-delivery-network-cdn/">
            
                <a href="../content-delivery-network-cdn/">
            
                    
                    Content Delivery Network (CDN)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../content-delivery-network-cdn/system-design-the-content-delivery-network-cdn.html">
            
                <a href="../content-delivery-network-cdn/system-design-the-content-delivery-network-cdn.html">
            
                    
                    System Design: The Content Delivery Network (CDN)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../content-delivery-network-cdn/introduction-to-a-cdn.html">
            
                <a href="../content-delivery-network-cdn/introduction-to-a-cdn.html">
            
                    
                    Introduction to a CDN
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../content-delivery-network-cdn/design-of-a-cdn.html">
            
                <a href="../content-delivery-network-cdn/design-of-a-cdn.html">
            
                    
                    Design of a CDN
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../content-delivery-network-cdn/in-depth-investigation-of-cdn-part-1.html">
            
                <a href="../content-delivery-network-cdn/in-depth-investigation-of-cdn-part-1.html">
            
                    
                    In-depth Investigation of CDN: Part 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../content-delivery-network-cdn/in-depth-investigation-of-cdn-part-2.html">
            
                <a href="../content-delivery-network-cdn/in-depth-investigation-of-cdn-part-2.html">
            
                    
                    In-depth Investigation of CDN: Part 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../content-delivery-network-cdn/evaluation-of-cdns-design.html">
            
                <a href="../content-delivery-network-cdn/evaluation-of-cdns-design.html">
            
                    
                    Evaluation of CDN's Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../sequencer/">
            
                <a href="../sequencer/">
            
                    
                    Sequencer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../sequencer/system-design-sequencer.html">
            
                <a href="../sequencer/system-design-sequencer.html">
            
                    
                    System Design: Sequencer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../sequencer/design-of-a-unique-id-generator.html">
            
                <a href="../sequencer/design-of-a-unique-id-generator.html">
            
                    
                    Design of a Unique ID Generator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../sequencer/unique-ids-with-causality.html">
            
                <a href="../sequencer/unique-ids-with-causality.html">
            
                    
                    Unique IDs with Causality
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../distributed-monitoring/">
            
                <a href="../distributed-monitoring/">
            
                    
                    Distributed Monitoring
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../distributed-monitoring/system-design-distributed-monitoring.html">
            
                <a href="../distributed-monitoring/system-design-distributed-monitoring.html">
            
                    
                    System Design: Distributed Monitoring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../distributed-monitoring/introduction-to-distributed-monitoring.html">
            
                <a href="../distributed-monitoring/introduction-to-distributed-monitoring.html">
            
                    
                    Introduction to Distributed Monitoring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../distributed-monitoring/prerequisites-of-a-monitoring-system.html">
            
                <a href="../distributed-monitoring/prerequisites-of-a-monitoring-system.html">
            
                    
                    Prerequisites of a Monitoring System
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../monitor-server-side-errors/">
            
                <a href="../monitor-server-side-errors/">
            
                    
                    Monitor Server-side Errors
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../monitor-server-side-errors/design-of-a-monitoring-system.html">
            
                <a href="../monitor-server-side-errors/design-of-a-monitoring-system.html">
            
                    
                    Design of a Monitoring System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../monitor-server-side-errors/detailed-design-of-a-monitoring-system.html">
            
                <a href="../monitor-server-side-errors/detailed-design-of-a-monitoring-system.html">
            
                    
                    Detailed Design of a Monitoring System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../monitor-server-side-errors/visualize-data-in-a-monitoring-system.html">
            
                <a href="../monitor-server-side-errors/visualize-data-in-a-monitoring-system.html">
            
                    
                    Visualize Data in a Monitoring System
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../monitor-client-side-errors/">
            
                <a href="../monitor-client-side-errors/">
            
                    
                    Monitor Client-side Errors
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../monitor-client-side-errors/focus-on-client-side-errors-in-a-monitoring-system.html">
            
                <a href="../monitor-client-side-errors/focus-on-client-side-errors-in-a-monitoring-system.html">
            
                    
                    Focus on Client-side Errors in a Monitoring System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../monitor-client-side-errors/design-of-a-client-side-monitoring-system.html">
            
                <a href="../monitor-client-side-errors/design-of-a-client-side-monitoring-system.html">
            
                    
                    Design of a Client-side Monitoring System
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../distributed-cache/">
            
                <a href="../distributed-cache/">
            
                    
                    Distributed Cache
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../distributed-cache/system-design-the-distributed-cache.html">
            
                <a href="../distributed-cache/system-design-the-distributed-cache.html">
            
                    
                    System Design: The Distributed Cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../distributed-cache/background-of-distributed-cache.html">
            
                <a href="../distributed-cache/background-of-distributed-cache.html">
            
                    
                    Background of Distributed Cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="../distributed-cache/high-level-design-of-a-distributed-cache.html">
            
                <a href="../distributed-cache/high-level-design-of-a-distributed-cache.html">
            
                    
                    High-level Design of a Distributed Cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="../distributed-cache/detailed-design-of-a-distributed-cache.html">
            
                <a href="../distributed-cache/detailed-design-of-a-distributed-cache.html">
            
                    
                    Detailed Design of a Distributed Cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="../distributed-cache/evaluation-of-a-distributed-caches-design.html">
            
                <a href="../distributed-cache/evaluation-of-a-distributed-caches-design.html">
            
                    
                    Evaluation of a Distributed Cache's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="../distributed-cache/memcached-versus-redis.html">
            
                <a href="../distributed-cache/memcached-versus-redis.html">
            
                    
                    Memcached versus Redis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../distributed-messaging-queue.html">
            
                <a href="../distributed-messaging-queue.html">
            
                    
                    Distributed Messaging Queue
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../distributed-messaging-queue/system-design-the-distributed-messaging-queue.html">
            
                <a href="../distributed-messaging-queue/system-design-the-distributed-messaging-queue.html">
            
                    
                    System Design: The Distributed Messaging Queue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="../distributed-messaging-queue/requirements-of-a-distributed-messaging-queues-design.html">
            
                <a href="../distributed-messaging-queue/requirements-of-a-distributed-messaging-queues-design.html">
            
                    
                    Requirements of a Distributed Messaging Queue’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="../distributed-messaging-queue/considerations-of-a-distributed-messaging-queues-design.html">
            
                <a href="../distributed-messaging-queue/considerations-of-a-distributed-messaging-queues-design.html">
            
                    
                    Considerations of a Distributed Messaging Queue’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="../distributed-messaging-queue/design-of-a-distributed-messaging-queue-part-1.html">
            
                <a href="../distributed-messaging-queue/design-of-a-distributed-messaging-queue-part-1.html">
            
                    
                    Design of a Distributed Messaging Queue: Part 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="../distributed-messaging-queue/design-of-a-distributed-messaging-queue-part-2.html">
            
                <a href="../distributed-messaging-queue/design-of-a-distributed-messaging-queue-part-2.html">
            
                    
                    Design of a Distributed Messaging Queue: Part 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="../distributed-messaging-queue/evaluation-of-a-distributed-messaging-queues-design.html">
            
                <a href="../distributed-messaging-queue/evaluation-of-a-distributed-messaging-queues-design.html">
            
                    
                    Evaluation of a Distributed Messaging Queue’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="../distributed-messaging-queue/quiz-on-the-distributed-messaging-queues-design.html">
            
                <a href="../distributed-messaging-queue/quiz-on-the-distributed-messaging-queues-design.html">
            
                    
                    Quiz on the Distributed Messaging Queue’s Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../pub-sub/">
            
                <a href="../pub-sub/">
            
                    
                    Pub-sub
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="../pub-sub/system-design-the-pub-sub-abstraction.html">
            
                <a href="../pub-sub/system-design-the-pub-sub-abstraction.html">
            
                    
                    System Design: The Pub-sub Abstraction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="../pub-sub/introduction-to-pub-sub.html">
            
                <a href="../pub-sub/introduction-to-pub-sub.html">
            
                    
                    Introduction to Pub-sub
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="../pub-sub/design-of-a-pub-sub-system.html">
            
                <a href="../pub-sub/design-of-a-pub-sub-system.html">
            
                    
                    Design of a Pub-sub System
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../rate-limiter.html">
            
                <a href="../rate-limiter.html">
            
                    
                    Rate Limiter
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="system-design-the-rate-limiter.html">
            
                <a href="system-design-the-rate-limiter.html">
            
                    
                    System Design: The Rate Limiter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="requirements-of-a-rate-limiters-design.html">
            
                <a href="requirements-of-a-rate-limiters-design.html">
            
                    
                    Requirements of a Rate Limiter’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.18.3" data-path="design-of-a-rate-limiter.html">
            
                <a href="design-of-a-rate-limiter.html">
            
                    
                    Design of a Rate Limiter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.4" data-path="rate-limiter-algorithms.html">
            
                <a href="rate-limiter-algorithms.html">
            
                    
                    Rate Limiter Algorithms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.5" data-path="quiz-on-the-rate-limiters-design.html">
            
                <a href="quiz-on-the-rate-limiters-design.html">
            
                    
                    Quiz on the Rate Limiter’s Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="../blob-store.html">
            
                <a href="../blob-store.html">
            
                    
                    Blob Store
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" data-path="../blob-store/system-design-a-blob-store.html">
            
                <a href="../blob-store/system-design-a-blob-store.html">
            
                    
                    System Design: A Blob Store
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2" data-path="../blob-store/requirements-of-a-blob-stores-design.html">
            
                <a href="../blob-store/requirements-of-a-blob-stores-design.html">
            
                    
                    Requirements of a Blob Store's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3" data-path="../blob-store/design-of-a-blob-store.html">
            
                <a href="../blob-store/design-of-a-blob-store.html">
            
                    
                    Design of a Blob Store
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4" data-path="../blob-store/design-considerations-of-a-blob-store.html">
            
                <a href="../blob-store/design-considerations-of-a-blob-store.html">
            
                    
                    Design Considerations of a Blob Store
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5" data-path="../blob-store/evaluation-of-a-blob-stores-design.html">
            
                <a href="../blob-store/evaluation-of-a-blob-stores-design.html">
            
                    
                    Evaluation of a Blob Store's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6" data-path="../blob-store/quiz-on-the-blob-stores-design.html">
            
                <a href="../blob-store/quiz-on-the-blob-stores-design.html">
            
                    
                    Quiz on the Blob Store's Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="../distributed-search.html">
            
                <a href="../distributed-search.html">
            
                    
                    Distributed Search
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.20.1" data-path="../distributed-search/system-design-the-distributed-search.html">
            
                <a href="../distributed-search/system-design-the-distributed-search.html">
            
                    
                    System Design: The Distributed Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2" data-path="../distributed-search/requirements-of-a-distributed-search-systems-design.html">
            
                <a href="../distributed-search/requirements-of-a-distributed-search-systems-design.html">
            
                    
                    Requirements of a Distributed Search System's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.3" data-path="../distributed-search/indexing-in-a-distributed-search.html">
            
                <a href="../distributed-search/indexing-in-a-distributed-search.html">
            
                    
                    Indexing in a Distributed Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.4" data-path="../distributed-search/design-of-a-distributed-search.html">
            
                <a href="../distributed-search/design-of-a-distributed-search.html">
            
                    
                    Design of a Distributed Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.5" data-path="../distributed-search/scaling-search-and-indexing.html">
            
                <a href="../distributed-search/scaling-search-and-indexing.html">
            
                    
                    Scaling Search and Indexing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.6" data-path="../distributed-search/evaluation-of-a-distributed-searchs-design.html">
            
                <a href="../distributed-search/evaluation-of-a-distributed-searchs-design.html">
            
                    
                    Evaluation of a Distributed Search's Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="../distributed-logging.html">
            
                <a href="../distributed-logging.html">
            
                    
                    Distributed Logging
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.21.1" data-path="../distributed-logging/system-design-distributed-logging.html">
            
                <a href="../distributed-logging/system-design-distributed-logging.html">
            
                    
                    System Design: Distributed Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.2" data-path="../distributed-logging/introduction-to-distributed-logging.html">
            
                <a href="../distributed-logging/introduction-to-distributed-logging.html">
            
                    
                    Introduction to Distributed Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.3" data-path="../distributed-logging/design-of-a-distributed-logging-service.html">
            
                <a href="../distributed-logging/design-of-a-distributed-logging-service.html">
            
                    
                    Design of a Distributed Logging Service
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="../distributed-task-scheduler.html">
            
                <a href="../distributed-task-scheduler.html">
            
                    
                    Distributed Task Scheduler
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.22.1" data-path="../distributed-task-scheduler/system-design-the-distributed-task-scheduler.html">
            
                <a href="../distributed-task-scheduler/system-design-the-distributed-task-scheduler.html">
            
                    
                    System Design: The Distributed Task Scheduler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.2" data-path="../distributed-task-scheduler/requirements-of-a-distributed-task-schedulers-design.html">
            
                <a href="../distributed-task-scheduler/requirements-of-a-distributed-task-schedulers-design.html">
            
                    
                    Requirements of a Distributed Task Scheduler's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.3" data-path="../distributed-task-scheduler/design-of-a-distributed-task-scheduler.html">
            
                <a href="../distributed-task-scheduler/design-of-a-distributed-task-scheduler.html">
            
                    
                    Design of a Distributed Task Scheduler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.4" data-path="../distributed-task-scheduler/design-considerations-of-a-distributed-task-scheduler.html">
            
                <a href="../distributed-task-scheduler/design-considerations-of-a-distributed-task-scheduler.html">
            
                    
                    Design Considerations of a Distributed Task Scheduler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.5" data-path="../distributed-task-scheduler/evaluation-of-a-distributed-task-schedulers-design.html">
            
                <a href="../distributed-task-scheduler/evaluation-of-a-distributed-task-schedulers-design.html">
            
                    
                    Evaluation of a Distributed Task Scheduler's Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="../sharded-counters.html">
            
                <a href="../sharded-counters.html">
            
                    
                    Sharded Counters
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.23.1" data-path="../sharded-counters/system-design-the-sharded-counters.html">
            
                <a href="../sharded-counters/system-design-the-sharded-counters.html">
            
                    
                    System Design: The Sharded Counters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.2" data-path="../sharded-counters/high-level-design-of-sharded-counters.html">
            
                <a href="../sharded-counters/high-level-design-of-sharded-counters.html">
            
                    
                    High-level Design of Sharded Counters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.3" data-path="../sharded-counters/detailed-design-of-sharded-counters.html">
            
                <a href="../sharded-counters/detailed-design-of-sharded-counters.html">
            
                    
                    Detailed Design of Sharded Counters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.4" data-path="../sharded-counters/quiz-on-the-sharded-counters-design.html">
            
                <a href="../sharded-counters/quiz-on-the-sharded-counters-design.html">
            
                    
                    Quiz on the Sharded Counters' Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="../concluding-the-building-blocks-discussion.html">
            
                <a href="../concluding-the-building-blocks-discussion.html">
            
                    
                    Concluding the Building Blocks Discussion
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.24.1" data-path="../concluding-the-building-blocks-discussion/wrapping-up-the-building-blocks-discussion.html">
            
                <a href="../concluding-the-building-blocks-discussion/wrapping-up-the-building-blocks-discussion.html">
            
                    
                    Wrapping Up the Building Blocks Discussion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.2" data-path="../concluding-the-building-blocks-discussion/the-reshaded-approach-for-system-design.html">
            
                <a href="../concluding-the-building-blocks-discussion/the-reshaded-approach-for-system-design.html">
            
                    
                    The RESHADED Approach for System Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.25" data-path="../design-youtube.html">
            
                <a href="../design-youtube.html">
            
                    
                    Design YouTube
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.25.1" data-path="../design-youtube/system-design-youtube.html">
            
                <a href="../design-youtube/system-design-youtube.html">
            
                    
                    System Design: YouTube
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.2" data-path="../design-youtube/requirements-of-youtubes-design.html">
            
                <a href="../design-youtube/requirements-of-youtubes-design.html">
            
                    
                    Requirements of YouTube's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.3" data-path="../design-youtube/design-of-youtube.html">
            
                <a href="../design-youtube/design-of-youtube.html">
            
                    
                    Design of YouTube
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.4" data-path="../design-youtube/evaluation-of-youtubes-design.html">
            
                <a href="../design-youtube/evaluation-of-youtubes-design.html">
            
                    
                    Evaluation of YouTube's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.5" data-path="../design-youtube/the-reality-is-more-complicated.html">
            
                <a href="../design-youtube/the-reality-is-more-complicated.html">
            
                    
                    The Reality Is More Complicated
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25.6" data-path="../design-youtube/quiz-on-youtubes-design.html">
            
                <a href="../design-youtube/quiz-on-youtubes-design.html">
            
                    
                    Quiz on YouTube's Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.26" data-path="../design-quora.html">
            
                <a href="../design-quora.html">
            
                    
                    Design Quora
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.26.1" data-path="../design-quora/system-design-quora.html">
            
                <a href="../design-quora/system-design-quora.html">
            
                    
                    System Design: Quora
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26.2" data-path="../design-quora/requirements-of-quoras-design.html">
            
                <a href="../design-quora/requirements-of-quoras-design.html">
            
                    
                    Requirements of Quora's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26.3" data-path="../design-quora/initial-design-of-quora.html">
            
                <a href="../design-quora/initial-design-of-quora.html">
            
                    
                    Initial Design of Quora
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26.4" data-path="../design-quora/final-design-of-quora.html">
            
                <a href="../design-quora/final-design-of-quora.html">
            
                    
                    Final Design of Quora
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26.5" data-path="../design-quora/evaluation-of-quoras-design.html">
            
                <a href="../design-quora/evaluation-of-quoras-design.html">
            
                    
                    Evaluation of Quora’s Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.27" data-path="../design-google-maps.html">
            
                <a href="../design-google-maps.html">
            
                    
                    Design Google Maps
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.27.1" data-path="../design-google-maps/system-design-google-maps.html">
            
                <a href="../design-google-maps/system-design-google-maps.html">
            
                    
                    System Design: Google Maps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.2" data-path="../design-google-maps/requirements-of-google-maps-design.html">
            
                <a href="../design-google-maps/requirements-of-google-maps-design.html">
            
                    
                    Requirements of Google Maps' Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.3" data-path="../design-google-maps/design-of-google-maps.html">
            
                <a href="../design-google-maps/design-of-google-maps.html">
            
                    
                    Design of Google Maps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.4" data-path="../design-google-maps/challenges-of-google-maps-design.html">
            
                <a href="../design-google-maps/challenges-of-google-maps-design.html">
            
                    
                    Challenges of Google Maps' Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.5" data-path="../design-google-maps/detailed-design-of-google-maps.html">
            
                <a href="../design-google-maps/detailed-design-of-google-maps.html">
            
                    
                    Detailed Design of Google Maps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27.6" data-path="../design-google-maps/evaluation-of-google-maps-design.html">
            
                <a href="../design-google-maps/evaluation-of-google-maps-design.html">
            
                    
                    Evaluation of Google Maps' Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.28" data-path="../design-a-proximity-service-yelp.html">
            
                <a href="../design-a-proximity-service-yelp.html">
            
                    
                    Design a Proximity Service / Yelp
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.28.1" data-path="../design-a-proximity-service-yelp/system-design-yelp.html">
            
                <a href="../design-a-proximity-service-yelp/system-design-yelp.html">
            
                    
                    System Design: Yelp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.2" data-path="../design-a-proximity-service-yelp/requirements-of-yelps-design.html">
            
                <a href="../design-a-proximity-service-yelp/requirements-of-yelps-design.html">
            
                    
                    Requirements of Yelp’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.3" data-path="../design-a-proximity-service-yelp/design-of-yelp.html">
            
                <a href="../design-a-proximity-service-yelp/design-of-yelp.html">
            
                    
                    Design of Yelp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.4" data-path="../design-a-proximity-service-yelp/design-considerations-of-yelp.html">
            
                <a href="../design-a-proximity-service-yelp/design-considerations-of-yelp.html">
            
                    
                    Design Considerations of Yelp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28.5" data-path="../design-a-proximity-service-yelp/quiz-on-yelps-design.html">
            
                <a href="../design-a-proximity-service-yelp/quiz-on-yelps-design.html">
            
                    
                    Quiz on Yelp's Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.29" data-path="../design-uber.html">
            
                <a href="../design-uber.html">
            
                    
                    Design Uber
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.29.1" data-path="../design-uber/system-design-uber.html">
            
                <a href="../design-uber/system-design-uber.html">
            
                    
                    System Design: Uber
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29.2" data-path="../design-uber/requirements-of-ubers-design.html">
            
                <a href="../design-uber/requirements-of-ubers-design.html">
            
                    
                    Requirements of Uber’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29.3" data-path="../design-uber/high-level-design-of-uber.html">
            
                <a href="../design-uber/high-level-design-of-uber.html">
            
                    
                    High-level Design of Uber
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29.4" data-path="../design-uber/detailed-design-of-uber.html">
            
                <a href="../design-uber/detailed-design-of-uber.html">
            
                    
                    Detailed Design of Uber
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29.5" data-path="../design-uber/payment-service-and-fraud-detection-in-uber-design.html">
            
                <a href="../design-uber/payment-service-and-fraud-detection-in-uber-design.html">
            
                    
                    Payment Service and Fraud Detection in Uber Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29.6" data-path="../design-uber/evaluation-of-ubers-design.html">
            
                <a href="../design-uber/evaluation-of-ubers-design.html">
            
                    
                    Evaluation of Uber’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29.7" data-path="../design-uber/quiz-on-ubers-design.html">
            
                <a href="../design-uber/quiz-on-ubers-design.html">
            
                    
                    Quiz on Uber's Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.30" data-path="../design-twitter.html">
            
                <a href="../design-twitter.html">
            
                    
                    Design Twitter
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.30.1" data-path="../design-twitter/system-design-twitter.html">
            
                <a href="../design-twitter/system-design-twitter.html">
            
                    
                    System Design: Twitter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.30.2" data-path="../design-twitter/requirements-of-twitters-design.html">
            
                <a href="../design-twitter/requirements-of-twitters-design.html">
            
                    
                    Requirements of Twitter’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.30.3" data-path="../design-twitter/high-level-design-of-twitter.html">
            
                <a href="../design-twitter/high-level-design-of-twitter.html">
            
                    
                    High-level Design of Twitter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.30.4" data-path="../design-twitter/detailed-design-of-twitter.html">
            
                <a href="../design-twitter/detailed-design-of-twitter.html">
            
                    
                    Detailed Design of Twitter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.30.5" data-path="../design-twitter/client-side-load-balancer-for-twitter.html">
            
                <a href="../design-twitter/client-side-load-balancer-for-twitter.html">
            
                    
                    Client-side Load Balancer for Twitter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.30.6" data-path="../design-twitter/quiz-on-twitters-design.html">
            
                <a href="../design-twitter/quiz-on-twitters-design.html">
            
                    
                    Quiz on Twitter's Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.31" data-path="../design-newsfeed-system.html">
            
                <a href="../design-newsfeed-system.html">
            
                    
                    Design Newsfeed System
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.31.1" data-path="../design-newsfeed-system/system-design-newsfeed-system.html">
            
                <a href="../design-newsfeed-system/system-design-newsfeed-system.html">
            
                    
                    System Design: Newsfeed System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.31.2" data-path="../design-newsfeed-system/requirements-of-a-newsfeed-systems-design.html">
            
                <a href="../design-newsfeed-system/requirements-of-a-newsfeed-systems-design.html">
            
                    
                    Requirements of a Newsfeed System’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.31.3" data-path="../design-newsfeed-system/design-of-a-newsfeed-system.html">
            
                <a href="../design-newsfeed-system/design-of-a-newsfeed-system.html">
            
                    
                    Design of a Newsfeed System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.31.4" data-path="../design-newsfeed-system/evaluation-of-a-newsfeed-systems-design.html">
            
                <a href="../design-newsfeed-system/evaluation-of-a-newsfeed-systems-design.html">
            
                    
                    Evaluation of a Newsfeed System’s Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.32" data-path="../design-instagram.html">
            
                <a href="../design-instagram.html">
            
                    
                    Design Instagram
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.32.1" data-path="../design-instagram/system-design-instagram.html">
            
                <a href="../design-instagram/system-design-instagram.html">
            
                    
                    System Design: Instagram
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.32.2" data-path="../design-instagram/requirements-of-instagrams-design.html">
            
                <a href="../design-instagram/requirements-of-instagrams-design.html">
            
                    
                    Requirements of Instagram’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.32.3" data-path="../design-instagram/design-of-instagram.html">
            
                <a href="../design-instagram/design-of-instagram.html">
            
                    
                    Design of Instagram
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.32.4" data-path="../design-instagram/detailed-design-of-instagram.html">
            
                <a href="../design-instagram/detailed-design-of-instagram.html">
            
                    
                    Detailed Design of Instagram
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.32.5" data-path="../design-instagram/quiz-on-instagrams-design.html">
            
                <a href="../design-instagram/quiz-on-instagrams-design.html">
            
                    
                    Quiz on Instagram’s Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.33" data-path="../design-a-url-shortening-service-tinyurl.html">
            
                <a href="../design-a-url-shortening-service-tinyurl.html">
            
                    
                    Design a URL Shortening Service / TinyURL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.33.1" data-path="../design-a-url-shortening-service-tinyurl/system-design-tinyurl.html">
            
                <a href="../design-a-url-shortening-service-tinyurl/system-design-tinyurl.html">
            
                    
                    System Design: TinyURL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.2" data-path="../design-a-url-shortening-service-tinyurl/requirements-of-tinyurls-design.html">
            
                <a href="../design-a-url-shortening-service-tinyurl/requirements-of-tinyurls-design.html">
            
                    
                    Requirements of TinyURL's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.3" data-path="../design-a-url-shortening-service-tinyurl/design-and-deployment-of-tinyurl.html">
            
                <a href="../design-a-url-shortening-service-tinyurl/design-and-deployment-of-tinyurl.html">
            
                    
                    Design and Deployment of TinyURL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.4" data-path="../design-a-url-shortening-service-tinyurl/encoder-for-tinyurl.html">
            
                <a href="../design-a-url-shortening-service-tinyurl/encoder-for-tinyurl.html">
            
                    
                    Encoder for TinyURL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.5" data-path="../design-a-url-shortening-service-tinyurl/evaluation-of-tinyurls-design.html">
            
                <a href="../design-a-url-shortening-service-tinyurl/evaluation-of-tinyurls-design.html">
            
                    
                    Evaluation of TinyURL's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33.6" data-path="../design-a-url-shortening-service-tinyurl/quiz-on-tinyurls-design.html">
            
                <a href="../design-a-url-shortening-service-tinyurl/quiz-on-tinyurls-design.html">
            
                    
                    Quiz on TinyURL's Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.34" data-path="../design-a-web-crawler.html">
            
                <a href="../design-a-web-crawler.html">
            
                    
                    Design a Web Crawler
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.34.1" data-path="../design-a-web-crawler/system-design-web-crawler.html">
            
                <a href="../design-a-web-crawler/system-design-web-crawler.html">
            
                    
                    System Design: Web Crawler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.34.2" data-path="../design-a-web-crawler/requirements-of-a-web-crawlers-design.html">
            
                <a href="../design-a-web-crawler/requirements-of-a-web-crawlers-design.html">
            
                    
                    Requirements of a Web Crawler's Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.34.3" data-path="../design-a-web-crawler/design-of-a-web-crawler.html">
            
                <a href="../design-a-web-crawler/design-of-a-web-crawler.html">
            
                    
                    Design of a Web Crawler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.34.4" data-path="../design-a-web-crawler/design-improvements-of-a-web-crawler.html">
            
                <a href="../design-a-web-crawler/design-improvements-of-a-web-crawler.html">
            
                    
                    Design Improvements of a Web Crawler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.34.5" data-path="../design-a-web-crawler/evaluation-of-web-crawlers-design.html">
            
                <a href="../design-a-web-crawler/evaluation-of-web-crawlers-design.html">
            
                    
                    Evaluation of Web Crawler's Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.35" data-path="../design-whatsapp.html">
            
                <a href="../design-whatsapp.html">
            
                    
                    Design WhatsApp
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.35.1" data-path="../design-whatsapp/system-design-whatsapp.html">
            
                <a href="../design-whatsapp/system-design-whatsapp.html">
            
                    
                    System Design: WhatsApp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.2" data-path="../design-whatsapp/requirements-of-whatsapps-design.html">
            
                <a href="../design-whatsapp/requirements-of-whatsapps-design.html">
            
                    
                    Requirements of WhatsApp’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.3" data-path="../design-whatsapp/high-level-design-of-whatsapp.html">
            
                <a href="../design-whatsapp/high-level-design-of-whatsapp.html">
            
                    
                    High-level Design of WhatsApp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.4" data-path="../design-whatsapp/detailed-design-of-whatsapp.html">
            
                <a href="../design-whatsapp/detailed-design-of-whatsapp.html">
            
                    
                    Detailed Design of WhatsApp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.5" data-path="../design-whatsapp/evaluation-of-whatsapps-design.html">
            
                <a href="../design-whatsapp/evaluation-of-whatsapps-design.html">
            
                    
                    Evaluation of WhatsApp’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35.6" data-path="../design-whatsapp/quiz-on-whatsapps-design.html">
            
                <a href="../design-whatsapp/quiz-on-whatsapps-design.html">
            
                    
                    Quiz on WhatsApp’s Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.36" data-path="../design-typeahead-suggestion.html">
            
                <a href="../design-typeahead-suggestion.html">
            
                    
                    Design Typeahead Suggestion
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.36.1" data-path="../design-typeahead-suggestion/system-design-the-typeahead-suggestion-system.html">
            
                <a href="../design-typeahead-suggestion/system-design-the-typeahead-suggestion-system.html">
            
                    
                    System Design: The Typeahead Suggestion System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.36.2" data-path="../design-typeahead-suggestion/requirements-of-the-typeahead-suggestion-systems-design.html">
            
                <a href="../design-typeahead-suggestion/requirements-of-the-typeahead-suggestion-systems-design.html">
            
                    
                    Requirements of the Typeahead Suggestion System’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.36.3" data-path="../design-typeahead-suggestion/high-level-design-of-the-typeahead-suggestion-system.html">
            
                <a href="../design-typeahead-suggestion/high-level-design-of-the-typeahead-suggestion-system.html">
            
                    
                    High-level Design of the Typeahead Suggestion System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.36.4" data-path="../design-typeahead-suggestion/data-structure-for-storing-prefixes.html">
            
                <a href="../design-typeahead-suggestion/data-structure-for-storing-prefixes.html">
            
                    
                    Data Structure for Storing Prefixes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.36.5" data-path="../design-typeahead-suggestion/detailed-design-of-the-typeahead-suggestion-system.html">
            
                <a href="../design-typeahead-suggestion/detailed-design-of-the-typeahead-suggestion-system.html">
            
                    
                    Detailed Design of the Typeahead Suggestion System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.36.6" data-path="../design-typeahead-suggestion/evaluation-of-the-typeahead-suggestion-systems-design.html">
            
                <a href="../design-typeahead-suggestion/evaluation-of-the-typeahead-suggestion-systems-design.html">
            
                    
                    Evaluation of the Typeahead Suggestion System’s Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.36.7" data-path="../design-typeahead-suggestion/quiz-on-the-typeahead-suggestion-systems-design.html">
            
                <a href="../design-typeahead-suggestion/quiz-on-the-typeahead-suggestion-systems-design.html">
            
                    
                    Quiz on the Typeahead Suggestion System’s Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.37" data-path="../design-a-collaborative-document-editing-service-google-docs.html">
            
                <a href="../design-a-collaborative-document-editing-service-google-docs.html">
            
                    
                    Design a Collaborative Document Editing Service / Google Docs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.37.1" data-path="../design-a-collaborative-document-editing-service-google-docs/system-design-google-docs.html">
            
                <a href="../design-a-collaborative-document-editing-service-google-docs/system-design-google-docs.html">
            
                    
                    System Design: Google Docs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.2" data-path="../design-a-collaborative-document-editing-service-google-docs/requirements-of-google-docs-design.html">
            
                <a href="../design-a-collaborative-document-editing-service-google-docs/requirements-of-google-docs-design.html">
            
                    
                    Requirements of Google Docs’ Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.3" data-path="../design-a-collaborative-document-editing-service-google-docs/design-of-google-docs.html">
            
                <a href="../design-a-collaborative-document-editing-service-google-docs/design-of-google-docs.html">
            
                    
                    Design of Google Docs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.4" data-path="../design-a-collaborative-document-editing-service-google-docs/concurrency-in-collaborative-editing.html">
            
                <a href="../design-a-collaborative-document-editing-service-google-docs/concurrency-in-collaborative-editing.html">
            
                    
                    Concurrency in Collaborative Editing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37.5" data-path="../design-a-collaborative-document-editing-service-google-docs/evaluation-of-google-docs-design.html">
            
                <a href="../design-a-collaborative-document-editing-service-google-docs/evaluation-of-google-docs-design.html">
            
                    
                    Evaluation of Google Docs’ Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.38" data-path="../spectacular-failures.html">
            
                <a href="../spectacular-failures.html">
            
                    
                    Spectacular Failures
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.38.1" data-path="../spectacular-failures/introduction-to-distributed-system-failures.html">
            
                <a href="../spectacular-failures/introduction-to-distributed-system-failures.html">
            
                    
                    Introduction to Distributed System Failures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38.2" data-path="../spectacular-failures/facebook-whatsapp-instagram-oculus-outage.html">
            
                <a href="../spectacular-failures/facebook-whatsapp-instagram-oculus-outage.html">
            
                    
                    Facebook, WhatsApp, Instagram, Oculus Outage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38.3" data-path="../spectacular-failures/aws-kinesis-outage-affecting-many-organizations.html">
            
                <a href="../spectacular-failures/aws-kinesis-outage-affecting-many-organizations.html">
            
                    
                    AWS Kinesis Outage Affecting Many Organizations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38.4" data-path="../spectacular-failures/aws-wide-spread-outage.html">
            
                <a href="../spectacular-failures/aws-wide-spread-outage.html">
            
                    
                    AWS Wide Spread Outage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.39" data-path="../conclusions.html">
            
                <a href="../conclusions.html">
            
                    
                    Conclusions
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Design of a Rate Limiter</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="design-of-a-rate-limiter">Design of a Rate Limiter</h1>
<h3 id="high-level-design-">High-level design <a href="#high-level-design-0" id="high-level-design-0"></a></h3>
<p>A rate limiter can be deployed as a separate service that will interact with a web server, as shown in the figure below. When a request is received, the rate limiter suggests whether the request should be forwarded to the server or not. The rate limiter consists of rules that should be followed by each incoming request. These rules define the throttling limit for each operation. Let&#x2019;s go through a rate limiter rule from <a href="https://github.com/envoyproxy/ratelimit" target="_blank">Lyft</a>, which has open-sourced its rate limiting component.</p>
<figure><img src="../.gitbook/assets/Screenshot 2023-09-03 at 1.20.45 AM.png" alt=""><figcaption></figcaption></figure>

<p>In the above rate-limiting rule, the <code>unit</code> is set to <code>day</code> and the <code>request_per_unit</code> is set to <code>5</code>. These parameters define that the system can allow five marketing messages per day.</p>
<figure><img src="../.gitbook/assets/Screenshot 2023-09-03 at 1.21.53 AM.png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/Screenshot 2023-09-03 at 1.22.27 AM.png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/Screenshot 2023-09-03 at 1.22.54 AM.png" alt=""><figcaption></figcaption></figure>

<h3 id="detailed-design-">Detailed design <a href="#detailed-design-0" id="detailed-design-0"></a></h3>
<p>The high-level design given above does not answer the following questions:</p>
<ul>
<li>Where are the rules stored?</li>
<li>How do we handle requests that are rate limited?</li>
</ul>
<p>In this section, we&#x2019;ll first expand the high-level architecture into several other essential components. We&#x2019;ll also explain each component in detail, as shown in the following figure.</p>
<figure><img src="../.gitbook/assets/Screenshot 2023-09-03 at 1.23.32 AM.png" alt=""><figcaption></figcaption></figure>

<p>Let&#x2019;s discuss each component that is present in the detailed design of a rate limiter.</p>
<p><strong>Rule database</strong>: This is the database, consisting of rules defined by the service owner. Each rule specifies the number of requests allowed for a particular client per unit of time.</p>
<p><strong>Rules retriever</strong>: This is a background process that periodically checks for any modifications to the rules in the database. The rule cache is updated if there are any modifications made to the existing rules.</p>
<p><strong>Throttle rules cache</strong>: The cache consists of rules retrieved from the <strong>rule database</strong>. The cache serves a rate-limiter request faster than persistent storage. As a result, it increases the performance of the system. So, when the rate limiter receives a request against an ID (key), it checks the ID against the rules in the cache.</p>
<p><strong>Decision-maker</strong>: This component is responsible for making decisions against the rules in the cache. This component works based on one of the rate-limiting algorithms that are discussed in the next lesson.</p>
<p><strong>Client identifier builder</strong>: This component generates a unique ID for a request received from a client. This could be a remote IP address, login ID, or a combination of several other attributes, due to which a sequencer can&#x2019;t be used here. This ID is considered as a key to store the user data in the key-value database. So, this key is passed to the <strong>decision-maker</strong> for further service decisions.</p>
<p>In case the predefined limit is crossed, APIs return an HTTP response code <code>429 Too Many Requests</code>, and one of the following strategies is applied to the request:</p>
<ul>
<li>Drop the request and return a specific response to the client, such as &#x201C;too many requests&#x201D; or &#x201C;service unavailable.&#x201D;</li>
<li>If some requests are rate limited due to a system overload, we can keep those requests in a queue to be processed later.</li>
</ul>
<h4 id="request-processing-">Request processing <a href="#request-processing-0" id="request-processing-0"></a></h4>
<p>When a request is received, the <em>client identifier builder</em> identifies the request and forwards it to the <em>decision-maker</em>. The decision-maker determines the services required by request, then checks the cache against the number of requests allowed, as well as the rules provided by the service owner. If the request does not exceed the count limit, it is forwarded to the <em>request processor</em>, which is responsible for serving the request.</p>
<p>The decision-maker takes decisions based on the throttling algorithms. The throttling can be hard, soft, or elastic. Based on <strong>soft or elastic throttling</strong>, requests are allowed more than the defined limit. These requests are either served or kept in the queue and served later, upon the availability of resources. Similarly, if <strong>hard throttling</strong> is used, requests are rejected, and a response error is sent back to the client.</p>
<p><strong>Question</strong></p>
<p>In the event of a failure, a rate limiter is unable to perform the task of throttling. In these scenarios, should the request be accepted or rejected?</p>
<p>In such a scenario, the proposed system should adhere to the non-functional requirements, including availability and fault tolerance. So, in case of failure, the rate limiter will be unable to perform. However, the default decision would be not to throttle any request. The reason for this is that we would have many rate limiters at a different service level. Even if there is no other rate limiter, the load balancer performs this task at a certain level, as explained earlier.</p>
<h4 id="race-condition-">Race condition <a href="#race-condition-0" id="race-condition-0"></a></h4>
<p>There is a possibility of a race condition in a situation of high concurrency request patterns. It happens when the &#x201C;get-then-set&#x201D; approach is followed, wherein the current counter is retrieved, incremented, and then pushed back to the database. While following this approach, some additional requests can come through that could leave the incremented counter invalid. This allows a client to send a very high rate of requests, bypassing the rate-limiting controls. To avoid this problem, the locking mechanism can be used, where one process can update the counter at a time while others wait for the lock to be released. Since this approach can cause a potential bottleneck, it significantly degrades performance and does not scale well.</p>
<p>Another method that could be used is the &#x201C;set-then-get&#x201D; approach, wherein a value is incremented in a very performant fashion, avoiding the locking approach. This approach works if there&#x2019;s minimum contention. However, one might use other approaches where the allowed quota is divided into multiple places and divide the load on them, or use sharded counters to scale an approach.</p>
<blockquote>
<p><strong>Note:</strong> We can use sharded counters for rate-limiting under the highly concurrent nature of traffic. By increasing the number of shards, we reduce write contention. Since we have to collect counters from all shards, our reading may slow down.</p>
</blockquote>
<h4 id="a-rate-limiter-should-not-be-on-the-clients-critical-path-">A rate limiter should not be on the client&#x2019;s critical path <a href="#a-rate-limiter-should-not-be-on-the-clients-critical-path-0" id="a-rate-limiter-should-not-be-on-the-clients-critical-path-0"></a></h4>
<p>Let&#x2019;s assume a real-time scenario where millions of requests hit the front-end servers. Each request will retrieve, update, and push back the count to the respective cache. After all these operations, the request is sent forward to be served. This approach could cause latency if there is a high number of requests. To avoid numerous computations in the client&#x2019;s critical path, we should divide the work into offline and online parts.</p>
<p>Initially, when a client&#x2019;s request is received, the system will just check the respective count. If it is less than the maximum limit, the system will allow the client&#x2019;s request. In the second phase, the system updates the respective count and cache offline. For a few requests, this won&#x2019;t have any effect on the performance, but for millions of requests, this approach increases performance significantly.</p>
<p>Let&#x2019;s understand the online and offline updates approach with an example. In the following set of illustrations, when a request is received, its ID is forwarded to the rate limiter that will check the condition <code>if(request(ID).Count &lt;= Max. Limit</code> by retrieving data from the cache. For simplicity, assume that one of the requests ID is 101, that is, <code>request(ID) = 101</code>. The following table shows the number of requests made by each client and the maximum number of requests per unit time that a client can make.</p>
<h2 id="">#</h2>
<table>
<thead>
<tr>
<th>Request ID</th>
<th>Maximum Limit</th>
<th>Count</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>5</td>
<td>4</td>
</tr>
<tr>
<td>101</td>
<td>5</td>
<td>3</td>
</tr>
</tbody>
</table>
<p>If the condition is true, the rate limiter will first respond back to the front-end server with an <code>Allowed</code> signal. The corresponding <code>count</code> and other relevant information are updated offline in the next steps. The rate limiter writes back the updated data in the cache. Following this approach reduces latency and avoids the contention that incoming requests could have caused.</p>
<p><img src="../.gitbook/assets/Screenshot 2023-09-03 at 1.26.02 AM.png" alt=""></p>
<p><img src="../.gitbook/assets/Screenshot 2023-09-03 at 1.26.14 AM.png" alt=""></p>
<p><img src="../.gitbook/assets/Screenshot 2023-09-03 at 1.26.26 AM.png" alt=""></p>
<p><img src="../.gitbook/assets/Screenshot 2023-09-03 at 1.26.39 AM.png" alt=""></p>
<blockquote>
<p><strong>Note:</strong> We&#x2019;ve seen a form of rate limiting in TCP network protocol, where the recipient can throttle the sender by advertising the size of the window (the outstanding data a recipient is willing to receive). The sender sends the minimum value of either the congestion window or the advertised window. Many network traffic shapers use similar mechanisms to provide preferential treatment to different network flows.</p>
</blockquote>
<h3 id="conclusion-">Conclusion <a href="#conclusion-0" id="conclusion-0"></a></h3>
<p>In this lesson, we discussed the design of a rate limiter in distributed systems. Let&#x2019;s analyze the non-functional requirements we promised in the previous lesson.</p>
<ul>
<li><strong>Availability:</strong> If a rate limiter fails, multiple rate limiters will be available to handle the incoming requests. So, a single point of failure is eliminated.</li>
<li><strong>Low latency:</strong> Our system retrieves and updates the data of each incoming request from the cache instead of the database. First, the incoming requests are forwarded if they do not exceed the rate limit, and then the cache and database are updated.</li>
<li><strong>Scalability:</strong> The number of rate limiters can be increased or decreased based on the number of incoming requests within the defined limit.</li>
</ul>
<p>Now, our system provides high availability, low latency, and scalability in light of the above discussion.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="requirements-of-a-rate-limiters-design.html" class="navigation navigation-prev " aria-label="Previous page: Requirements of a Rate Limiter’s Design">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="rate-limiter-algorithms.html" class="navigation navigation-next " aria-label="Next page: Rate Limiter Algorithms">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Design of a Rate Limiter","level":"1.18.3","depth":2,"next":{"title":"Rate Limiter Algorithms","level":"1.18.4","depth":2,"path":"rate-limiter/rate-limiter-algorithms.md","ref":"rate-limiter/rate-limiter-algorithms.md","articles":[]},"previous":{"title":"Requirements of a Rate Limiter’s Design","level":"1.18.2","depth":2,"path":"rate-limiter/requirements-of-a-rate-limiters-design.md","ref":"rate-limiter/requirements-of-a-rate-limiters-design.md","articles":[]},"dir":"ltr"},"config":{"plugins":["expandable-chapters-small","page-toc","-lunr","-search","search-plus","code"],"root":".","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"expandable-chapters-small":{},"page-toc":{"position":"before-first","selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4","showByDefault":true},"search-plus":{},"code":{"copyButtons":true},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"changhanxie","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Grokking Modern System Design Interview","language":"zh-hans","links":{"sidebar":{"github":"https://kuweiguge.github.io/Grokking-Modern-System-Design-Interview-Gitbook"}},"gitbook":">= 3.2.2","description":"Grokking Modern System Design Interview"},"file":{"path":"rate-limiter/design-of-a-rate-limiter.md","mtime":"2023-09-27T08:41:47.488Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2023-09-27T08:42:30.547Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-page-toc/anchor-3.1.1.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-page-toc/page-toc.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

